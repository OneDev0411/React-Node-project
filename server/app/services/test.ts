import sync from "./de_deal_sync";
import { makeUrl, DEAL, getContextFromDeal, BRAND } from "../../util";

require("dotenv").config();
const database_url: string = process.env.DATABASE_URL1 || "";

const dealData = {
  id: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
  created_at: 1649256983.85365,
  updated_at: 1649256983.85365,
  deleted_at: null,
  listing: "9beac914-dcab-11e9-8659-027d31a1f7a0",
  created_by: {
    type: "user",
    username: null,
    first_name: "Emil",
    last_name: "Main Admin",
    email: "emil+main+admin@rechat.com",
    phone_number: null,
    created_at: 1505901634.09228,
    id: "8b2c4758-9dea-11e7-a787-0242ac110003",
    cover_image_url: null,
    profile_image_url:
      "https://d2dzyv4cb7po1i.cloudfront.net/8b2c4758-9dea-11e7-a787-0242ac110003/9498c700-735b-11ea-97f2-b3fd1c45e42f.jpg",
    updated_at: 1655281195.78977,
    user_status: "Active",
    profile_image_thumbnail_url: null,
    cover_image_thumbnail_url: null,
    email_confirmed: true,
    timezone: "America/New_York",
    user_type: "Agent",
    deleted_at: null,
    phone_confirmed: true,
    is_shadow: false,
    personal_room: "8b2e9a4e-9dea-11e7-a787-0242ac110003",
    brand: "8cb4a358-8973-11e7-9089-0242ac110003",
    fake_email: false,
    features: ["Backoffice"],
    last_seen_at: 1658219414.083,
    email_signature: "",
    daily_enabled: true,
    email_quota: 30000,
    website: null,
    instagram: null,
    twitter: null,
    linkedin: null,
    youtube: null,
    facebook: null,
    current_time: "4:30 AM - Tuesday Jul 19, 2022",
    push_allowed: false,
    agents: [
      {
        id: "02c6308c-43d1-11e6-872e-f23c91b0d077",
        email: "chhigg@gmail.com",
        mlsid: "0674645",
        fax: null,
        full_name: "Christopher Higgins",
        first_name: "Christopher",
        last_name: "Higgins",
        middle_name: null,
        phone_number: "(682) 438-8215",
        nar_number: "800506136",
        office_mui: "15511676",
        status: "Active",
        office_mlsid: "RMSWR01",
        work_phone: "(682) 438-8215",
        generational_name: null,
        matrix_unique_id: "63138817",
        updated_at: 1467847565.51454,
        deleted_at: null,
        created_at: 1467847565.51454,
        mls: "NTREIS",
        license_number: null,
        designation: null,
        nrds: null,
        type: "agent",
        office_id: "8d7977f8-b97e-11e5-94c9-f23c91c841bd",
        secret_questions: ["(682) XXX-XX15", "chhixxxxxxxx.com"],
      },
      {
        id: "908516ca-a266-11e5-a8bd-f23c91c841bd",
        email: "csummers@briggsfreeman.com",
        mlsid: "0446102",
        fax: null,
        full_name: "Caroline Summers",
        first_name: "Caroline",
        last_name: "Summers",
        middle_name: null,
        phone_number: "(214) 597-7513",
        nar_number: "817001445",
        office_mui: "15502343",
        status: "Active",
        office_mlsid: "BRIG01",
        work_phone: "(214) 597-7513",
        generational_name: null,
        matrix_unique_id: "15530735",
        updated_at: 1451139644.92396,
        deleted_at: null,
        created_at: 1452542709.26428,
        mls: "NTREIS",
        license_number: null,
        designation: null,
        nrds: null,
        type: "agent",
        office_id: "c1adb8e6-b97d-11e5-b1ac-f23c91c841bd",
        secret_questions: ["(214) XXX-XX13", "csummexxxxxxxxxxxxxxan.com"],
      },
      {
        id: "982c2fda-a266-11e5-a8bd-f23c91c841bd",
        email: "belindavb57@att.net",
        mlsid: "0466145",
        fax: null,
        full_name: "Vickie Foreman",
        first_name: "Vickie",
        last_name: "Foreman",
        middle_name: null,
        phone_number: "(469) 328-6593",
        nar_number: "798512408",
        office_mui: "15502699",
        status: "Active",
        office_mlsid: "CART01",
        work_phone: "(469) 328-6593",
        generational_name: null,
        matrix_unique_id: "15535147",
        updated_at: 1451139644.92396,
        deleted_at: null,
        created_at: 1452542709.26428,
        mls: "NTREIS",
        license_number: null,
        designation: null,
        nrds: null,
        type: "agent",
        office_id: "c1faba56-b97d-11e5-b1ac-f23c91c841bd",
        secret_questions: ["(469) XXX-XX93", "belixxxxxxxxxxx.net"],
      },
      {
        id: "ebdc91a6-a270-11e5-a099-f23c91c841bd",
        email: "terriwyang@yahoo.com",
        mlsid: "0599572",
        fax: null,
        full_name: "Terri Yang",
        first_name: "Terri",
        last_name: "Yang",
        middle_name: null,
        phone_number: "(214) 518-1770",
        nar_number: "791514018",
        office_mui: "15504153",
        status: "Active",
        office_mlsid: "DFWH01C",
        work_phone: "(214) 518-1770",
        generational_name: null,
        matrix_unique_id: "15571054",
        updated_at: 1451139644.92396,
        deleted_at: null,
        created_at: 1452542709.26428,
        mls: "NTREIS",
        license_number: null,
        designation: null,
        nrds: null,
        type: "agent",
        office_id: "c32a8172-b97d-11e5-b1ac-f23c91c841bd",
        secret_questions: ["(214) XXX-XX70", "terrixxxxxxxxxxo.com"],
      },
    ],
    last_seen_type: "Mobile",
    active_brand: "8cb4a358-8973-11e7-9089-0242ac110003",
    display_name: "Emil Main Admin",
    abbreviated_display_name: "Emil",
    online_state: "Online",
    has_password: true,
  },
  brand: {
    id: "8cb4a358-8973-11e7-9089-0242ac110003",
    created_at: 1503651503.29826,
    updated_at: 1503651503.29826,
    palette: {
      primary: "#fff",
      tertiary: "#000",
      marketing: {
        beta: {
          bg: "#002344",
          ta: "#d5ae6a",
          tb: "#fff",
        },
        alpha: {
          bg: "white",
          ta: "#002344",
        },
        theta: {
          bg: "#d5ae6a",
          ta: "#002344",
          tb: "#fff",
        },
      },
      secondary: "#F47524",
      type: "brand_palette",
    },
    assets: {
      marketing: {
        "logo-wide-beta":
          "https://assets.rechat.com/briggsfreeman/logo-wide-beta.png",
        "logo-wide-alpha":
          "https://assets.rechat.com/briggsfreeman/logo-wide-alpha.png",
        "logo-square-beta":
          "https://assets.rechat.com/briggsfreeman/logo-square-beta.png",
        "logo-square-alpha":
          "https://assets.rechat.com/briggsfreeman/logo-square-alpha.png",
      },
      site_logo:
        "https://d35hljz7a9994c.cloudfront.net/default_images/logo2.png",
      site_logo_wide:
        "https://cdn1.imggmi.com/uploads/2019/1/23/3eb591762cf59e09b46400e456a98e25-full.png",
      type: "brand_assets",
    },
    messages: {
      site_title: "Main Office",
      office_title: "Main Office",
      type: "brand_messages",
    },
    parent: null,
    name: "Main Office",
    deleted_at: null,
    training: false,
    brand_type: "Brokerage",
    type: "brand",
    hostnames: [
      "main.irish.rechat.com",
      "theming.rechat.co",
      "theming-dynamic-properties.rechat.co",
    ],
    member_count: 10,
    base_url: "https://main.irish.rechat.com",
  },
  deal_type: "Selling",
  brokerwolf_tier_id: null,
  brokerwolf_id: null,
  brokerwolf_row_version: null,
  number: 1267,
  title: "6707 Gallinas Way",
  faired_at: "2022-04-06T14:56:46.535Z",
  property_type: {
    id: "86880bc2-ac2d-4780-aa6b-1edb6e30ff27",
    created_at: 1611907517.3382,
    updated_at: 1611907517.3382,
    deleted_at: null,
    brand: "8cb4a358-8973-11e7-9089-0242ac110003",
    label: "Resale",
    is_lease: false,
    order: 0,
    required_roles: [
      {
        title: "Buyer Agent",
        checklist_types: ["Offer", "Buying"],
        lease: true,
        sale: true,
        transaction_type: ["Sale", "Lease"],
        role: "BuyerAgent",
        type: "deal_role_definition",
      },
      {
        title: "Seller",
        checklist_types: ["Selling"],
        transaction_type: ["Sale"],
        role: "Seller",
        type: "deal_role_definition",
      },
      {
        title: "Seller Agent",
        checklist_types: ["Selling"],
        transaction_type: ["Sale", "Lease"],
        role: "SellerAgent",
        type: "deal_role_definition",
      },
      {
        title: "Buyer",
        checklist_types: ["Offer", "Buying"],
        transaction_type: ["Sale"],
        role: "Buyer",
        type: "deal_role_definition",
      },
    ],
    optional_roles: [
      {
        title: "Co Buyer Agent",
        checklist_types: ["Offer", "Buying"],
        transaction_type: ["Sale", "Lease"],
        role: "CoBuyerAgent",
        type: "deal_role_definition",
      },
      {
        title: "Buyer Power Of Attorney",
        checklist_types: ["Offer", "Buying"],
        transaction_type: ["Sale"],
        role: "BuyerPowerOfAttorney",
        type: "deal_role_definition",
      },
      {
        title: "Buyer Lawyer",
        checklist_types: ["Offer", "Buying"],
        transaction_type: ["Sale"],
        role: "BuyerLawyer",
        type: "deal_role_definition",
      },
      {
        title: "Buyer Referral",
        checklist_types: ["Offer", "Buying"],
        transaction_type: ["Sale"],
        role: "BuyerReferral",
        type: "deal_role_definition",
      },
      {
        title: "Co Seller Agent",
        checklist_types: ["Selling"],
        transaction_type: ["Sale", "Lease"],
        role: "CoSellerAgent",
        type: "deal_role_definition",
      },
      {
        title: "Seller Power Of Attorney",
        checklist_types: ["Selling"],
        transaction_type: ["Sale"],
        role: "SellerPowerOfAttorney",
        type: "deal_role_definition",
      },
      {
        title: "Seller Lawyer",
        checklist_types: ["Selling"],
        transaction_type: ["Sale"],
        role: "SellerLawyer",
        type: "deal_role_definition",
      },
      {
        title: "Seller Referral",
        checklist_types: ["Selling"],
        transaction_type: ["Sale"],
        role: "SellerReferral",
        type: "deal_role_definition",
      },
      {
        title: "Escrow Officer",
        checklist_types: ["Offer", "Buying"],
        transaction_type: ["Sale"],
        role: "Title",
        type: "deal_role_definition",
      },
      {
        title: "Lender",
        checklist_types: ["Offer", "Buying"],
        transaction_type: ["Sale"],
        role: "Lender",
        type: "deal_role_definition",
      },
      {
        title: "Appraiser",
        checklist_types: ["Offer", "Buying"],
        transaction_type: ["Sale"],
        role: "Appraiser",
        type: "deal_role_definition",
      },
    ],
    type: "brand_property_type",
    checklists: [
      {
        id: "da29e694-93f9-11e7-a2d6-0242ac110003",
        created_at: 1504808697.42012,
        deleted_at: null,
        brand: "8cb4a358-8973-11e7-9089-0242ac110003",
        title: "Listing",
        order: 1,
        is_terminatable: false,
        tab_name: "Listing Inbox",
        is_deactivatable: false,
        property_type: "86880bc2-ac2d-4780-aa6b-1edb6e30ff27",
        checklist_type: "Selling",
        type: "brand_checklist",
        tasks: [
          {
            id: "33052fbc-93fa-11e7-af3f-0242ac110003",
            created_at: "2017-09-07T18:27:26.50409+00:00",
            deleted_at: null,
            checklist: "da29e694-93f9-11e7-a2d6-0242ac110003",
            title:
              "Residential Real Estate Listing Agreement, Exclusive Right to Sell (TAR 1101)\t\t\t\t\t",
            task_type: "Form",
            form: "93db9b72-88de-11e7-9f45-0242ac11000b",
            order: 1,
            required: false,
            tab_name: null,
            application: null,
          },
          {
            id: "39604a7c-93fa-11e7-a8c1-0242ac110003",
            created_at: "2017-09-07T18:27:37.143145+00:00",
            deleted_at: null,
            checklist: "da29e694-93f9-11e7-a2d6-0242ac110003",
            title: "Information About Brokerage Services (TAR 2501)\t\t\t\t\t",
            task_type: "Form",
            form: "02941370-8900-11e7-8c52-0242ac11000b",
            order: 2,
            required: false,
            tab_name: null,
            application: null,
          },
          {
            id: "2fb651f2-9403-11e7-a7d7-0242ac110003",
            created_at: "2017-09-07T19:31:46.426004+00:00",
            deleted_at: null,
            checklist: "da29e694-93f9-11e7-a2d6-0242ac110003",
            title: "Tax Record",
            task_type: "Form",
            form: null,
            order: 4,
            required: false,
            tab_name: null,
            application: null,
          },
          {
            id: "42c689ce-9403-11e7-a7d7-0242ac110003",
            created_at: "2017-09-07T19:32:18.383753+00:00",
            deleted_at: null,
            checklist: "da29e694-93f9-11e7-a2d6-0242ac110003",
            title: "Sotheby's Amenities Checklist (BFSIR)\t\t\t\t\t",
            task_type: "Form",
            form: "ce94e876-9267-11e7-b30a-0242ac11000b",
            order: 5,
            required: false,
            tab_name: null,
            application: null,
          },
          {
            id: "4d857118-9403-11e7-a7d7-0242ac110003",
            created_at: "2017-09-07T19:32:36.416446+00:00",
            deleted_at: null,
            checklist: "da29e694-93f9-11e7-a2d6-0242ac110003",
            title: "Property Romance",
            task_type: "Form",
            form: null,
            order: 6,
            required: false,
            tab_name: null,
            application: null,
          },
          {
            id: "66f6ceee-9403-11e7-ba89-0242ac110003",
            created_at: "2017-09-07T19:33:19.121305+00:00",
            deleted_at: null,
            checklist: "da29e694-93f9-11e7-a2d6-0242ac110003",
            title:
              "Square Footage, Dimension, and Acreage Disclaimer (BFSIR)\t\t\t\t\t",
            task_type: "Form",
            form: "01df7cde-89ab-11e7-a658-0242ac11000b",
            order: 7,
            required: false,
            tab_name: null,
            application: null,
          },
          {
            id: "7b88c894-9403-11e7-96f6-0242ac110003",
            created_at: "2017-09-07T19:33:53.634821+00:00",
            deleted_at: null,
            checklist: "da29e694-93f9-11e7-a2d6-0242ac110003",
            title:
              "Residential Real Property Affidavit T-47 (TAR 1907)\t\t\t\t\t",
            task_type: "Form",
            form: "13425c16-9307-11e7-b16a-0242ac11000b",
            order: 9,
            required: false,
            tab_name: null,
            application: null,
          },
          {
            id: "e0db35ce-a984-11e7-9f0e-0242ac11000d",
            created_at: "2017-10-05T04:23:03.103858+00:00",
            deleted_at: null,
            checklist: "da29e694-93f9-11e7-a2d6-0242ac110003",
            title: "Residential Input Form (NTREIS)\t\t\t\t\t",
            task_type: "Form",
            form: "7e22a014-a97c-11e7-bba0-0242ac11000d",
            order: 10,
            required: false,
            tab_name: null,
            application: null,
          },
          {
            id: "bdf00bfa-b37c-11e7-8bce-0242ac11000d",
            created_at: "2017-10-17T20:50:00.168009+00:00",
            deleted_at: null,
            checklist: "da29e694-93f9-11e7-a2d6-0242ac110003",
            title: "Survey",
            task_type: "Form",
            form: null,
            order: 10,
            required: false,
            tab_name: null,
            application: null,
          },
        ],
      },
      {
        id: "9749279a-9403-11e7-a3bf-0242ac110003",
        created_at: 1504812880.1877,
        deleted_at: null,
        brand: "8cb4a358-8973-11e7-9089-0242ac110003",
        title: "Contract",
        order: 1,
        is_terminatable: true,
        tab_name: "Contract Inbox",
        is_deactivatable: true,
        property_type: "86880bc2-ac2d-4780-aa6b-1edb6e30ff27",
        checklist_type: "Buying",
        type: "brand_checklist",
        tasks: [
          {
            id: "6caa9b8e-ee64-11ec-87af-42010a960002",
            created_at: "2022-06-17T17:39:22.888973+00:00",
            deleted_at: null,
            checklist: "9749279a-9403-11e7-a3bf-0242ac110003",
            title: "Commission Slip",
            task_type: "Application",
            form: null,
            order: 1,
            required: false,
            tab_name: null,
            application: "a3f5cac4-f058-4023-8002-5a56092b7b01",
          },
        ],
      },
      {
        id: "b9d9b082-6208-11eb-abae-027d31a1f7a0",
        created_at: 1611907517.13888,
        deleted_at: null,
        brand: "8cb4a358-8973-11e7-9089-0242ac110003",
        title: "Offer",
        order: 1,
        is_terminatable: true,
        tab_name: "Contract Inbox",
        is_deactivatable: true,
        property_type: "86880bc2-ac2d-4780-aa6b-1edb6e30ff27",
        checklist_type: "Offer",
        type: "brand_checklist",
        tasks: [
          {
            id: "ca5833a2-ee66-11ec-87af-42010a960002",
            created_at: "2022-06-17T17:56:19.049277+00:00",
            deleted_at: null,
            checklist: "b9d9b082-6208-11eb-abae-027d31a1f7a0",
            title: "Commission Slip",
            task_type: "Application",
            form: null,
            order: 1,
            required: false,
            tab_name: null,
            application: "a3f5cac4-f058-4023-8002-5a56092b7b01",
          },
        ],
      },
    ],
  },
  type: "deal",
  is_draft: false,
  roles: [
    "b9720cd0-eb54-11ec-8a5d-42010a960002",
    "ea0d8ebe-eb54-11ec-b331-42010a960002",
    "e8a742de-f3da-11ec-b41a-42010a960002",
    "05f902ec-f623-11ec-9e26-42010a960002",
    "7f689a24-fdfe-11ec-a312-42010a960002",
    "9e267eae-fdfe-11ec-a15f-42010a960002",
    "044f5932-02da-11ed-ab08-42010a960002",
  ],
  context: {
    block_number: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "block_number",
      text: "",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "2245020e-1439-11e9-8f3d-0a95998482ac",
      searchable: "",
      deleted_at: null,
    },
    buyer_transaction_fee: {
      id: "70399740-b5bc-11ec-b757-42010a960002",
      type: "deal_context_item",
      created_at: "2022-04-06T15:15:48.071008+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: null,
      approved_at: null,
      key: "buyer_transaction_fee",
      text: "234234",
      number: 234234,
      date: null,
      data_type: "Number",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "6fc2a324-b5bc-11ec-b4b5-42010a960002",
      source: "Provided",
      definition: "cfd6e17a-a20e-11eb-b3a0-02786783109b",
      searchable: "'234234':1",
      deleted_at: null,
    },
    city: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "city",
      text: "Spring",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "2248f9d6-1439-11e9-8f44-0a95998482ac",
      searchable: "'spring':1",
      deleted_at: null,
    },
    option_period: {
      id: "70256702-b5bc-11ec-b757-42010a960002",
      type: "deal_context_item",
      created_at: "2022-04-06T15:15:48.071008+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_at: "2022-04-06T15:15:48.162023+00:00",
      key: "option_period",
      text: "2022-04-06",
      number: null,
      date: 1649203200,
      data_type: "Date",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "6fc2a324-b5bc-11ec-b4b5-42010a960002",
      source: "Provided",
      definition: "223c8d40-1439-11e9-8f2e-0a95998482ac",
      searchable: "'-04':2 '-06':3 '2022':1",
      deleted_at: null,
    },
    "12a1b": {
      id: "70321d12-b5bc-11ec-b757-42010a960002",
      type: "deal_context_item",
      created_at: "2022-04-06T15:15:48.071008+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_at: "2022-04-06T15:15:48.245402+00:00",
      key: "12a1b",
      text: "34234234",
      number: 34234234,
      date: null,
      data_type: "Number",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "6fc2a324-b5bc-11ec-b4b5-42010a960002",
      source: "Provided",
      definition: "2254af56-1439-11e9-8f5a-0a95998482ac",
      searchable: "'34234234':1",
      deleted_at: null,
    },
    closing_date: {
      id: "08c3f83e-ee6b-11ec-9f43-42010a960002",
      type: "deal_context_item",
      created_at: "2022-06-17T18:26:41.670515+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_at: "2022-06-17T18:26:41.761448+00:00",
      key: "closing_date",
      text: "2022-06-14T19:00:00.000Z",
      number: null,
      date: 1655233200,
      data_type: "Date",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "6fc2a324-b5bc-11ec-b4b5-42010a960002",
      source: "Provided",
      definition: "223f5390-1439-11e9-8f32-0a95998482ac",
      searchable: "'-06':2 '-14':3 '00':5 '00.000':6 '2022':1 't19':4 'z':7",
      deleted_at: null,
    },
    pdoc: {
      id: "60c1b9b4-e81b-11ec-9ff8-42010a960002",
      type: "deal_context_item",
      created_at: "2022-06-09T17:41:22.593999+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_at: "2022-06-09T17:41:22.671177+00:00",
      key: "pdoc",
      text: "1654796510291",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "6fc2a324-b5bc-11ec-b4b5-42010a960002",
      source: "Provided",
      definition: "55b80c14-b1f5-11ec-a213-42010a960002",
      searchable: "'1654796510291':1",
      deleted_at: null,
    },
    possession_date: {
      id: "70346ca2-b5bc-11ec-b757-42010a960002",
      type: "deal_context_item",
      created_at: "2022-04-06T15:15:48.071008+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_at: "2022-04-06T15:15:48.260539+00:00",
      key: "possession_date",
      text: "2022-04-06",
      number: null,
      date: 1649203200,
      data_type: "Date",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "6fc2a324-b5bc-11ec-b4b5-42010a960002",
      source: "Provided",
      definition: "223fd41e-1439-11e9-8f33-0a95998482ac",
      searchable: "'-04':2 '-06':3 '2022':1",
      deleted_at: null,
    },
    sales_price: {
      id: "703b4824-b5bc-11ec-b757-42010a960002",
      type: "deal_context_item",
      created_at: "2022-04-06T15:15:48.071008+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_at: "2022-04-06T15:15:48.305487+00:00",
      key: "sales_price",
      text: "234234",
      number: 234234,
      date: null,
      data_type: "Number",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "6fc2a324-b5bc-11ec-b4b5-42010a960002",
      source: "Provided",
      definition: "2240e8f4-1439-11e9-8f35-0a95998482ac",
      searchable: "'234234':1",
      deleted_at: null,
    },
    seller_transaction_fee: {
      id: "c45a565a-b5b9-11ec-8a84-42010a960002",
      type: "deal_context_item",
      created_at: "2022-04-06T14:56:40.838854+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_at: "2022-06-29T15:10:55.116609+00:00",
      key: "seller_transaction_fee",
      text: "435",
      number: 435,
      date: null,
      data_type: "Number",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "bab0a208-b5b9-11ec-ad50-42010a960002",
      source: "Provided",
      definition: "0d74c7d2-a20e-11eb-8d85-02786783109b",
      searchable: "'435':1",
      deleted_at: null,
    },
    seller_transaction_fee_payer: {
      id: "c45c4852-b5b9-11ec-8a84-42010a960002",
      type: "deal_context_item",
      created_at: "2022-04-06T14:56:40.838854+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_at: "2022-06-29T15:10:56.943054+00:00",
      key: "seller_transaction_fee_payer",
      text: "4535",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "bab0a208-b5b9-11ec-ad50-42010a960002",
      source: "Provided",
      definition: "2f21c51a-a20e-11eb-802e-02786783109b",
      searchable: "'4535':1",
      deleted_at: null,
    },
    contract_date: {
      id: "702d2c26-b5bc-11ec-b757-42010a960002",
      type: "deal_context_item",
      created_at: "2022-04-06T15:15:48.071008+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_at: "2022-04-06T15:15:48.21302+00:00",
      key: "contract_date",
      text: "2022-04-06",
      number: null,
      date: 1649203200,
      data_type: "Date",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "6fc2a324-b5bc-11ec-b4b5-42010a960002",
      source: "Provided",
      definition: "223b83e6-1439-11e9-8f2c-0a95998482ac",
      searchable: "'-04':2 '-06':3 '2022':1",
      deleted_at: null,
    },
    county: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "county",
      text: "Harris",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "224affb0-1439-11e9-8f48-0a95998482ac",
      searchable: "'harri':1",
      deleted_at: null,
    },
    escrow_office: {
      id: "702aa7f8-b5bc-11ec-b757-42010a960002",
      type: "deal_context_item",
      created_at: "2022-04-06T15:15:48.071008+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: null,
      approved_at: null,
      key: "escrow_office",
      text: "James Escrow",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "6fc2a324-b5bc-11ec-b4b5-42010a960002",
      source: "Provided",
      definition: "f2947970-a20e-11eb-b4aa-02786783109b",
      searchable: "'escrow':2 'jame':1",
      deleted_at: null,
    },
    expiration_date: {
      id: "c453879e-b5b9-11ec-8a84-42010a960002",
      type: "deal_context_item",
      created_at: "2022-04-06T14:56:40.838854+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_at: "2022-04-06T14:56:40.902758+00:00",
      key: "expiration_date",
      text: "2022-04-06",
      number: null,
      date: 1649203200,
      data_type: "Date",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "bab0a208-b5b9-11ec-ad50-42010a960002",
      source: "Provided",
      definition: "223af476-1439-11e9-8f2b-0a95998482ac",
      searchable: "'-04':2 '-06':3 '2022':1",
      deleted_at: null,
    },
    financing: {
      id: "c74f29dc-06fc-11ed-96bc-42010a960002",
      type: "deal_context_item",
      created_at: "2022-07-19T00:50:26.30372+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_at: "2022-07-19T00:50:26.373167+00:00",
      key: "financing",
      text: "Mortgage",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "6fc2a324-b5bc-11ec-b4b5-42010a960002",
      source: "Provided",
      definition: "dde6015c-e5c3-11ec-894b-42010a960002",
      searchable: "'mortgag':1",
      deleted_at: null,
    },
    financing_program: {
      id: "c8842460-06fc-11ed-9496-42010a960002",
      type: "deal_context_item",
      created_at: "2022-07-19T00:50:28.338105+00:00",
      created_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_by: "8b2c4758-9dea-11e7-a787-0242ac110003",
      approved_at: "2022-07-19T00:50:28.398099+00:00",
      key: "financing_program",
      text: "FHA",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: "6fc2a324-b5bc-11ec-b4b5-42010a960002",
      source: "Provided",
      definition: "f03facc2-e5c3-11ec-bcc3-42010a960002",
      searchable: "'fha':1",
      deleted_at: null,
    },
    full_address: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "full_address",
      text: "6707 Gallinas Way Spring, Texas 77379",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "2241f7f8-1439-11e9-8f37-0a95998482ac",
      searchable: "'6707':1 '77379':6 'gallina':2 'spring':4 'texa':5 'way':3",
      deleted_at: null,
    },
    list_date: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "list_date",
      text: null,
      number: null,
      date: 1564012800,
      data_type: "Date",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "223a625e-1439-11e9-8f2a-0a95998482ac",
      searchable: null,
      deleted_at: null,
    },
    listing_status: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "listing_status",
      text: "Active",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "224c18fa-1439-11e9-8f4a-0a95998482ac",
      searchable: "'activ':1",
      deleted_at: null,
    },
    list_price: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "list_price",
      text: null,
      number: 323990,
      date: null,
      data_type: "Number",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "22405fba-1439-11e9-8f34-0a95998482ac",
      searchable: "'323990':1",
      deleted_at: null,
    },
    lot_number: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "lot_number",
      text: "",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "2244834c-1439-11e9-8f3c-0a95998482ac",
      searchable: "",
      deleted_at: null,
    },
    mls_area_major: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "mls_area_major",
      text: "14",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "224d4a2c-1439-11e9-8f4c-0a95998482ac",
      searchable: "'14':1",
      deleted_at: null,
    },
    mls_number: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "mls_number",
      text: "43445034",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "224cca3e-1439-11e9-8f4b-0a95998482ac",
      searchable: "'43445034':1",
      deleted_at: null,
    },
    photo: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "photo",
      text: "https://d2j29n432zojb.cloudfront.net/HAR-176376551-1.jpg",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "fefb481e-a7c9-11ea-a81b-027d31a1f7a0",
      searchable:
        "'/har-176376551-1.jpg':3 'd2j29n432zojb.cloudfront.net':2 'd2j29n432zojb.cloudfront.net/har-176376551-1.jpg':1",
      deleted_at: null,
    },
    postal_code: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "postal_code",
      text: "77379",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "224a7f72-1439-11e9-8f47-0a95998482ac",
      searchable: "'77379':1",
      deleted_at: null,
    },
    property_type: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "property_type",
      text: "Resale",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "PropertyType",
      definition: "224fd6de-1439-11e9-8f51-0a95998482ac",
      searchable: "'resal':1",
      deleted_at: null,
    },
    state: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "state",
      text: "Texas",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "22497c62-1439-11e9-8f45-0a95998482ac",
      searchable: "'texa':1",
      deleted_at: null,
    },
    state_code: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "state_code",
      text: "Texas",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "2249fa66-1439-11e9-8f46-0a95998482ac",
      searchable: "'texa':1",
      deleted_at: null,
    },
    street_address: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "street_address",
      text: "6707 Gallinas Way",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "224877f4-1439-11e9-8f43-0a95998482ac",
      searchable: "'6707':1 'gallina':2 'way':3",
      deleted_at: null,
    },
    street_dir_prefix: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "street_dir_prefix",
      text: "",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "22469ed4-1439-11e9-8f40-0a95998482ac",
      searchable: "",
      deleted_at: null,
    },
    street_name: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "street_name",
      text: "Gallinas",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "22471fc6-1439-11e9-8f41-0a95998482ac",
      searchable: "'gallina':1",
      deleted_at: null,
    },
    street_number: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "street_number",
      text: "6707",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "22461964-1439-11e9-8f3f-0a95998482ac",
      searchable: "'6707':1",
      deleted_at: null,
    },
    street_suffix: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "street_suffix",
      text: "Way",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "2247c778-1439-11e9-8f42-0a95998482ac",
      searchable: "'way':1",
      deleted_at: null,
    },
    subdivision: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "subdivision",
      text: "Vistas at Klein Lake",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "2245985e-1439-11e9-8f3e-0a95998482ac",
      searchable: "'klein':3 'lake':4 'vista':1",
      deleted_at: null,
    },
    unit_number: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "unit_number",
      text: "",
      number: null,
      date: null,
      data_type: "Text",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "224302e2-1439-11e9-8f39-0a95998482ac",
      searchable: "",
      deleted_at: null,
    },
    year_built: {
      id: null,
      type: "deal_context_item",
      created_at: null,
      created_by: null,
      approved_by: null,
      approved_at: null,
      key: "year_built",
      text: null,
      number: 2019,
      date: null,
      data_type: "Number",
      deal: "ba2a06bc-b5b9-11ec-a0ef-42010a960002",
      checklist: null,
      source: "MLS",
      definition: "224b9164-1439-11e9-8f49-0a95998482ac",
      searchable: "'2019':1",
      deleted_at: null,
    },
    type: "deal_context",
  },
  new_notifications: [
    {
      id: "798679c8-b5bf-11ec-af6d-42010a960002",
      notification_type: "UserSentMessage",
      room: "bae0feee-b5b9-11ec-ad50-42010a960002",
      message: "Alex:",
      type: "notification_summary",
    },
  ],
  inboxes: ["Contract Inbox", "Listing Inbox"],
  attention_requests: 2,
  attention_requested_at: 1649259550.32012,
  has_active_offer: true,
  array_agg: null,
  email: "GallinasWay6707-1267@alpine.rechat.com",
  checklists: [
    "6fc2a324-b5bc-11ec-b4b5-42010a960002",
    "bab0a208-b5b9-11ec-ad50-42010a960002",
  ],
  envelopes: null,
  files: null,
};

const test = () => {
  console.log("test", makeUrl(database_url), DEAL, getContextFromDeal, BRAND);
  sync(dealData);
};

test();
